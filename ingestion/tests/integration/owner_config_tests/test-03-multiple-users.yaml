# ============================================
# Test Case 03: Multiple Users Valid
# ============================================
# Test Scenario: Test multiple users as owners (valid scenario)
# Expected Results:
#   - finance_db → 2 owners (alice, bob) - both must be type="user"
#   - finance_db.accounting.revenue → 3 owners (charlie, david, emma) - all type="user"
#   - finance_db.accounting.expenses → 1 owner (frank) - type="user"
#
# Note: This test validates that multiple USERS can be assigned as owners

source:
  type: postgres
  serviceName: postgres-test-03-multiple-users
  serviceConnection:
    config:
      type: Postgres
      username: admin
      authType:
        password: admin123
      hostPort: localhost:5433
      database: finance_db
  sourceConfig:
    config:
      type: DatabaseMetadata
      
      # Owner Configuration - Multiple users (valid)
      ownerConfig:
        default: "data-platform-team"
        
        database:
          "finance_db": ["alice", "bob"]  # 2 users
        
        table:
          "finance_db.accounting.revenue": ["charlie", "david", "emma"]  # 3 users
          "finance_db.accounting.expenses": ["frank"]  # 1 user in array (should work)
        
        enableInheritance: true
      
      includeTables: true
      includeViews: true
      markDeletedTables: true
      useFqnForFiltering: true
      overrideMetadata: true

sink:
  type: metadata-rest
  config: {}

workflowConfig:
  loggerLevel: DEBUG
  openMetadataServerConfig:
    hostPort: http://localhost:8585/api
    authProvider: openmetadata
    securityConfig:
      jwtToken: "YOUR_JWT_TOKEN_HERE"
