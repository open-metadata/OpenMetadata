# ============================================
# Test Case 07: Partial Success
# ============================================
# Test Scenario: Test partial success strategy when some owners don't exist
# Expected Behavior:
#   - revenue table: Should have 2 owners (alice, bob), skip nonexistent users
#     - Log: WARNING "Could not find owner: nonexistent-user-1"
#     - Log: WARNING "Could not find owner: nonexistent-user-2"
#   - expenses table: Should have 2 owners (charlie, david)
#
# This test validates that ingestion continues when some owners are not found

source:
  type: postgres
  serviceName: postgres-test-07-partial
  serviceConnection:
    config:
      type: Postgres
      username: admin
      authType:
        password: admin123
      hostPort: localhost:5433
      database: finance_db
  sourceConfig:
    config:
      type: DatabaseMetadata
      
      # Owner Configuration - Partial success test
      ownerConfig:
        default: "data-platform-team"
        
        table:
          # Mix of existing and non-existing users
          "finance_db.accounting.revenue": 
            ["alice", "nonexistent-user-1", "bob", "nonexistent-user-2"]
          
          # All existing users
          "finance_db.accounting.expenses":
            ["charlie", "david"]
        
        enableInheritance: true
      
      includeTables: true
      includeViews: true
      markDeletedTables: true
      useFqnForFiltering: true
      overrideMetadata: true

sink:
  type: metadata-rest
  config: {}

workflowConfig:
  loggerLevel: DEBUG
  openMetadataServerConfig:
    hostPort: http://localhost:8585/api
    authProvider: openmetadata
    securityConfig:
      jwtToken: "YOUR_JWT_TOKEN_HERE"