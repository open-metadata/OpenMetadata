/*
 *  Copyright 2023 Collate.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *  http://www.apache.org/licenses/LICENSE-2.0
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
@import (reference) '../../../styles/variables.less';

.lineage-node {
  .entity-button-icon svg {
    height: 28px;
    width: 28px;
  }

  .custom-node-label-container {
    width: 19rem;
    min-height: 84px;
    .lineage-breadcrumb {
      .lineage-breadcrumb-item {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    }
    .entity-header-name {
      .node-service-type::after {
        content: '|';
        margin-left: 6px;
      }
      svg {
        width: 18px;
        color: @grey-4;
      }
    }
  }

  .entity-label-container {
    &::after {
      display: block;
      width: 100%;
      height: 1px;
      margin-top: @margin-sm;
      margin-bottom: @margin-xs;

      background: @grey-200;
      content: '';
    }
  }

  .entity-footer {
    .columns-info-dropdown-label {
      min-width: fit-content;
      padding: 0px @size-xs 0 @size-sm;
      border: none;
      border-radius: 16px;
      box-shadow: none;

      background-color: @primary-1;
      color: @blue-7;
      font-weight: 500;
      text-transform: none;
      cursor: pointer;

      &:hover {
        box-shadow: none;
        background-color: @primary-1;
        color: @blue-7;
      }

      &::after {
        margin-left: @size-xxs;
        width: @size-sm;
        height: @size-sm;
        content: '';
      }

      &.collapsed::after {
        background: no-repeat center / contain
          url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 24 24' fill='none' stroke='%233062d4' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
      }

      &.expanded::after {
        background: no-repeat center / contain
          url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 24 24' fill='none' stroke='%233062d4' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='18 15 12 9 6 15'/></svg>");
      }
    }

    .mapping-icon {
      cursor: pointer;
    }
  }
}

.lineage-base-node {
  border-top-left-radius: 0px;

  .lineage-node-badge-container {
    position: absolute;
    top: -14px;
    left: 0px;
    width: 68px;
    height: 15px;

    border: 1px solid rgb(177, 177, 183);
    border-bottom: 0px;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;

    background: rgb(255, 255, 255);

    .lineage-node-badge {
      position: absolute;
      top: 3px;
      left: 3px;

      display: flex;
      justify-content: center;
      align-items: center;
      gap: 4px;

      width: 60px;
      padding: 2px;
      border-radius: 7px;

      background-color: #175cd3;
      color: white;

      font-size: 12px;
      font-weight: 500;

      &::before {
        display: inline-block;
        width: 12px;
        height: 13px;

        background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='12' height='13' viewBox='0 0 12 13' fill='none'><path d='M4.5 11.5V6.5H7.5V11.5M1.5 5L6 1.5L10.5 5V10.5C10.5 10.7652 10.3946 11.0196 10.2071 11.2071C10.0196 11.3946 9.76522 11.5 9.5 11.5H2.5C2.23478 11.5 1.98043 11.3946 1.79289 11.2071C1.60536 11.0196 1.5 10.7652 1.5 10.5V5Z' stroke='%23EFF8FF' stroke-linecap='round' stroke-linejoin='round'/></svg>");
        background-repeat: no-repeat;
        background-size: contain;

        content: '';
      }

      &::after {
        content: 'Base';
      }
    }
  }

  .lineage-node-content {
    margin-top: 10px;
  }

  &:hover .lineage-node-badge-container {
    border-color: rgb(53, 111, 231);
  }
}

.custom-node-header-tracing {
  .lineage-node-badge-container {
    border-color: @primary-color;
  }
}
