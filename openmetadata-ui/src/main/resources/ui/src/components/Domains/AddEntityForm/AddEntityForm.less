/*
 *  Copyright 2025 Collate.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *  http://www.apache.org/licenses/LICENSE-2.0
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

@import (reference) '../../../styles/variables.less';

.add-entity-form-v2 {
  .ant-form-item {
    margin-bottom: 24px;
  }

  // TODO: Find a way to add the required mark after the label instead of before
  .ant-form-item-label {
    padding-bottom: 8px;

    > label {
      color: @text-color;
      font-weight: 500;
      font-size: 14px;
      line-height: 22px;
    }
  }

  // Cover image upload section
  .cover-section {
    margin-bottom: 32px;

    .cover-upload-container {
      width: 100%;
      height: 160px;
      border: 2px dashed @border-color;
      border-radius: 8px;
      background: @grey-1;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;

      &:hover {
        border-color: @primary-color;
      }

      .cover-preview {
        width: 100%;
        height: 100%;
        position: relative;

        img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .cover-overlay {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          color: white;
          opacity: 0;
          transition: opacity 0.3s ease;

          .anticon {
            font-size: 24px;
            margin-bottom: 8px;
          }

          span {
            font-size: 14px;
          }
        }

        &:hover .cover-overlay {
          opacity: 1;
        }
      }

      .upload-placeholder {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        color: @text-color-tertiary;

        .anticon {
          font-size: 32px;
          margin-bottom: 8px;
        }

        .upload-hint {
          font-size: 12px;
          color: @text-color-tertiary;
          margin-top: 4px;
        }
      }
    }
  }

  // Icon and theme section
  .icon-theme-section {
    margin-bottom: 32px;

    .icon-selector {
      .selected-icon {
        width: 47px;
        height: 34px;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid #d9d9d9;

        &.clickable {
          cursor: pointer;
          transition: all 0.2s ease;

          &:hover {
            border-color: #1890ff;
            box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
          }
        }

        .domain-icon {
          width: 21px;
          height: 22px;
          color: white;

          svg {
            width: 100%;
            height: 100%;
          }
        }
      }
    }

    .color-palette {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;

      .color-option {
        width: 34px;
        height: 34px;
        border-radius: 4px;
        cursor: pointer;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;

        &:hover {
          border-color: #6b7280;
          transform: scale(1.1);
        }

        &.selected {
          border-color: #262626;
          box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.1);
        }

        .check-icon {
          width: 24px;
          height: 20px;
          color: white !important;

          * {
            fill: currentColor !important;
          }
        }
      }
    }
  }

  .display-name-field {
    // To unify the spacing between the display name field and the description field due to asterisk
    margin-bottom: 5px;
  }

  .om-block-editor {
    max-height: 200px !important;
  }

  // Form sections
  .owner-section,
  .experts-section {
    margin-bottom: 24px;

    .ant-space {
      margin-top: 8px;
    }
  }

  .experts-list {
    margin-bottom: 8px;
  }

  // Rich text editor adjustments
  .ant-form-item-control-input {
    .ql-container {
      border-radius: 6px;
      border: 1px solid #eaecf5;

      &:focus-within {
        border-color: #1890ff;
        box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.1);
      }
    }
  }

  // Select and input field adjustments
  .ant-select,
  .ant-input {
    border-radius: 6px;

    &:focus,
    &:focus-within {
      border-color: #1890ff;
      box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.1);
    }
  }

  // Tag suggestion adjustments
  .ant-select-multiple .ant-select-selection-item {
    border-radius: 4px;
    background: rgba(24, 144, 255, 0.1);
    border: 1px solid #1890ff;
    color: #1890ff;
  }

  // User team select adjustments
  .ant-btn-primary {
    border-radius: 6px;
    box-shadow: none;

    &:hover {
      background: #40a9ff;
      border-color: #40a9ff;
    }
  }

  // Entity-specific styling
  &.domain-form {
    .domain-icon {
      color: #1890ff;
    }
  }

  &.data-product-form {
    .domain-icon {
      color: @success-color;
    }
  }

  &.subdomain-form {
    .domain-icon {
      color: @warning-color;
    }
  }
}

// Image upload modal styles
.url-input-section {
  .ant-input {
    margin-bottom: 16px;
  }

  .url-input-actions {
    display: flex;
    justify-content: flex-end;
    gap: 8px;
    margin-top: 12px;
  }
}

.upload-section {
  text-align: center;

  .ant-upload {
    display: block;
    margin-bottom: 16px;
  }

  .upload-hint {
    font-size: 12px;
    color: #6b7280;
  }
}

// Footer styling
.add-entity-form-v2-footer {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  padding: 16px 0 0;
  border-top: 1px solid #eaecf5;

  .ant-btn {
    border-radius: 6px;
    min-width: 80px;

    &:first-child {
      border-color: #eaecf5;
      color: #262626;

      &:hover {
        border-color: #1890ff;
        color: #1890ff;
      }
    }
  }
}

// Popover styling
.ant-popover {
  .ant-popover-content {
    .ant-popover-inner {
      padding: 0px;
      .ant-popover-inner-content {
        width: 300px;
      }
    }
  }
}
