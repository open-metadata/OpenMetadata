{
  "name": "system-notification-entity-updated",
  "fullyQualifiedName": "system-notification-entity-updated",
  "displayName": "Entity Updated Notification",
  "description": "System default template for entity update notifications",
  "provider": "system",
  "templateSubject": "[{{publisherName}}] - Change Event Update from {{emailingEntity}}",
  "templateBody": "<strong>{{event.userName}}</strong> changed <strong>{{camelCaseToTitle event.entityType}}</strong>: <a href=\"{{buildEntityUrl event.entityType entity}}\">{{entity.fullyQualifiedName}}</a><br><br>{{#with (groupEventChanges event.changeDescription) as |changes|}}{{#if (and (eq event.entityType 'testCase') (hasFieldInChanges changes 'testCaseResult'))}}<strong>Execution result:</strong> {{#if (eq entity.testCaseStatus 'Success')}}\u2705 <strong>Passed</strong>{{else if (eq entity.testCaseStatus 'Failed')}}\u274c <strong>Failed</strong>{{else if (eq entity.testCaseStatus 'Aborted')}}\u26a0\ufe0f <strong>Aborted</strong>{{else if (eq entity.testCaseStatus 'Queued')}}\u23f3 <strong>Queued</strong>{{else}}<strong>{{entity.testCaseStatus}}</strong>{{/if}}{{#if entity.testCaseResult.timestamp}} at {{formatDate entity.testCaseResult.timestamp}}{{/if}}<br><br><strong>\ud83d\udccb Test Case Information:</strong><br><ul>{{#if entity.owners}}<li><strong>Owners:</strong> {{#each entity.owners}}{{#if displayName}}{{displayName}}{{else}}{{name}}{{/if}}{{#unless @last}}, {{/unless}}{{/each}}</li>{{/if}}{{#if entity.tags}}<li><strong>Tags:</strong> {{#each (pluck entity.tags 'tagFQN') as |tagFQN|}}{{tagFQN}}{{#unless @last}}, {{/unless}}{{/each}}</li>{{/if}}{{#if entity.domains}}<li><strong>Domains:</strong> {{#each entity.domains}}{{#if displayName}}{{displayName}}{{else}}{{name}}{{/if}}{{#unless @last}}, {{/unless}}{{/each}}</li>{{/if}}{{#if entity.severity}}<li><strong>Severity:</strong> {{entity.severity}}</li>{{/if}}{{#if entity.entityFQN}}<li><strong>Related Table:</strong> <a href=\"{{buildEntityUrl 'table' entity.entityFQN}}\">{{entity.entityFQN}}</a></li>{{/if}}{{#if entity.testDefinition.name}}<li><strong>Test Definition:</strong> {{entity.testDefinition.name}}{{#if entity.testDefinition.description}}<br>{{{entity.testDefinition.description}}}{{/if}}</li>{{/if}}{{#if entity.parameterValues}}<li><strong>Configuration:</strong> {{#each entity.parameterValues}}{{name}}: {{value}}{{#unless @last}}, {{/unless}}{{/each}}</li>{{/if}}{{#if entity.description}}<li><strong>Description:</strong><br><blockquote>{{{processMentions entity.description}}}</blockquote></li>{{/if}}</ul><strong>\ud83d\udd0d Execution Summary:</strong><br><ul>{{#if (or entity.testCaseResult.minBound entity.testCaseResult.maxBound)}}<li><strong>Bounds:</strong> {{#if entity.testCaseResult.minBound}}min: {{entity.testCaseResult.minBound}}{{/if}}{{#if (and entity.testCaseResult.minBound entity.testCaseResult.maxBound)}}, {{/if}}{{#if entity.testCaseResult.maxBound}}max: {{entity.testCaseResult.maxBound}}{{/if}}</li>{{/if}}{{#if entity.testCaseResult.testResultValue}}<li><strong>Test Results:</strong> {{#each entity.testCaseResult.testResultValue}}{{name}}: {{value}}{{#unless @last}}, {{/unless}}{{/each}}</li>{{/if}}{{#if entity.testCaseResult.passedRows}}<li><strong>Passed Rows:</strong> {{entity.testCaseResult.passedRows}}{{#if entity.testCaseResult.passedRowsPercentage}} ({{math entity.testCaseResult.passedRowsPercentage 'round' 2}}%){{/if}}</li>{{/if}}{{#if entity.testCaseResult.failedRows}}<li><strong>Failed Rows:</strong> {{entity.testCaseResult.failedRows}}{{#if entity.testCaseResult.failedRowsPercentage}} ({{math entity.testCaseResult.failedRowsPercentage 'round' 2}}%){{/if}}</li>{{/if}}</ul>{{#if (or (eq entity.testCaseStatus 'Failed') (eq entity.testCaseStatus 'Aborted'))}}<strong>\ud83d\udd2c Failure Investigation:</strong><br><ul>{{#if entity.testCaseResult.result}}<li><strong>Details:</strong><br><pre style=\"overflow-x:auto;white-space:pre;max-width:100%;font-family:monospace;background:#f5f5f5;padding:8px;border:1px solid #ddd;\"><code>{{entity.testCaseResult.result}}</code></pre></li>{{/if}}{{#if entity.testCaseResult.sampleData}}<li><strong>Sample Data:</strong><br><pre style=\"overflow-x:auto;white-space:pre;max-width:100%;font-family:monospace;background:#f5f5f5;padding:8px;border:1px solid #ddd;\"><code>{{entity.testCaseResult.sampleData}}</code></pre></li>{{/if}}{{#if entity.inspectionQuery}}<li><strong>Inspection Query:</strong><br><pre style=\"overflow-x:auto;white-space:pre;max-width:100%;font-family:monospace;background:#f5f5f5;padding:8px;border:1px solid #ddd;\"><code>{{entity.inspectionQuery}}</code></pre></li>{{/if}}{{#if entity.failedRowsSample}}<li><strong>Failed Rows Sample:</strong><br><br>{{#with (parseEntityLink entity.entityLink) as |link|}}{{{renderTableSample entity.failedRowsSample link.arrayField 10 3}}}{{/with}}</li>{{/if}}</ul>{{/if}}<br>{{else if (and (eq event.entityType 'dataContract') (hasFieldInChanges changes 'dataContractResult'))}}{{#if (eq entity.latestResult.status 'Success')}}\u2705 <strong>Data Contract Validation Passed</strong>{{else if (eq entity.latestResult.status 'Failed')}}\u274c <strong>Data Contract Validation Failed</strong>{{else if (eq entity.latestResult.status 'Aborted')}}\u26a0\ufe0f <strong>Data Contract Validation Aborted</strong>{{else if (eq entity.latestResult.status 'PartialSuccess')}}\u26a0\ufe0f <strong>Data Contract Validation Partially Succeeded</strong>{{else}}\ud83d\udd04 <strong>Data Contract Validation Running</strong>{{/if}}{{#if entity.latestResult.timestamp}} at {{formatDate entity.latestResult.timestamp}}{{/if}}<br>{{#if (or entity.entityStatus entity.entity)}}<br><strong>\ud83d\udccb Contract Information:</strong><br><ul>{{#if entity.displayName}}<li><strong>Name:</strong> {{entity.displayName}}</li>{{/if}}{{#if entity.entityStatus}}<li><strong>Status:</strong> {{entity.entityStatus}}</li>{{/if}}{{#if entity.entity}}<li><strong>Applied to {{camelCaseToTitle entity.entity.type}}:</strong> <a href=\"{{buildEntityUrl entity.entity.type entity.entity}}\">{{entity.entity.fullyQualifiedName}}</a></li>{{/if}}{{#if (gt (length entity.owners) 0)}}<li><strong>Owners:</strong> {{#each entity.owners}}{{#if displayName}}{{displayName}}{{else}}{{name}}{{/if}}{{#unless @last}}, {{/unless}}{{/each}}</li>{{/if}}{{#if (gt (length entity.reviewers) 0)}}<li><strong>Reviewers:</strong> {{#each entity.reviewers}}{{#if displayName}}{{displayName}}{{else}}{{name}}{{/if}}{{#unless @last}}, {{/unless}}{{/each}}</li>{{/if}}</ul>{{/if}}{{#if (or (eq entity.latestResult.status 'Failed') (eq entity.latestResult.status 'Aborted') (eq entity.latestResult.status 'PartialSuccess'))}}{{#each changes.updates}}{{#if (eq name 'dataContractResult')}}<strong>\ud83d\udd2c Failure Investigation:</strong><br>{{#if newValue.schemaValidation}}<ul><li><strong>Schema Validation ({{newValue.schemaValidation.passed}}/{{newValue.schemaValidation.total}}) {{#if (eq newValue.schemaValidation.failed 0)}}\u2705{{else}}\u274c{{/if}}</strong>{{#if (gt newValue.schemaValidation.failed 0)}}<br>Failed columns:<ul>{{#each newValue.schemaValidation.failedFields as |field|}}<li>{{field}}</li>{{/each}}</ul>{{/if}}</li></ul>{{/if}}{{#if newValue.semanticsValidation}}<ul><li><strong>Semantics Validation ({{newValue.semanticsValidation.passed}}/{{newValue.semanticsValidation.total}}) {{#if (eq newValue.semanticsValidation.failed 0)}}\u2705{{else}}\u274c{{/if}}</strong><br>{{#if (eq newValue.semanticsValidation.failed 0)}}All semantic rules validated successfully.{{else}}<ul>{{#each (limit newValue.semanticsValidation.failedRules 5)}}<li>{{ruleName}}</li>{{/each}}{{#if (gt newValue.semanticsValidation.failed 5)}}<li>... and {{math newValue.semanticsValidation.failed '-' 5}} more failed semantic rule(s)</li>{{/if}}</ul>{{/if}}</li></ul>{{/if}}{{#if newValue.qualityValidation}}<ul><li><strong>Quality Validation ({{newValue.qualityValidation.passed}}/{{newValue.qualityValidation.total}}) {{#if (eq newValue.qualityValidation.failed 0)}}\u2705{{else}}\u274c{{/if}}</strong><br>{{#if (eq newValue.qualityValidation.failed 0)}}All quality expectations validated successfully.{{else}}<ul><li><strong>{{newValue.qualityValidation.failed}} out of {{newValue.qualityValidation.total}}</strong> ({{math (math 100 '-' newValue.qualityValidation.qualityScore) 'round' 2}}%) total test cases have <strong>Failed</strong>!{{#if entity.testSuite}} <a href=\"{{buildEntityUrl entity.testSuite.type entity.testSuite}}\">Check test results here</a>{{/if}}.</li></ul>{{/if}}</li></ul>{{/if}}{{#if entity.latestResult.message}}<br><p><strong>\u2139\ufe0f Additional Information:</strong></p><pre style=\"overflow-x:auto;white-space:pre;max-width:100%;font-family:monospace;background:#f5f5f5;padding:8px;border:1px solid #ddd;\"><code>{{entity.latestResult.message}}</code></pre>{{/if}}{{/if}}{{/each}}{{/if}}<br><br>{{else if (and (eq event.entityType 'testSuite') (hasFieldInChanges changes 'testCaseResultSummary'))}}{{#if entity.summary}}{{#if (eq entity.summary.failed 0)}}{{#if (eq entity.summary.aborted 0)}}\u2705 <strong>Test Suite Passed</strong>{{else}}\u26a0\ufe0f <strong>Test Suite Aborted</strong>{{/if}}{{else}}\u274c <strong>Test Suite Failed</strong>{{/if}}{{#if entity.testCaseResultSummary}}{{#each entity.testCaseResultSummary}}{{#if @last}} at {{formatDate timestamp}}{{/if}}{{/each}}{{/if}}{{/if}}<br><br><strong>\ud83d\udccb Test Suite Information:</strong><br><ul><li><strong>Name:</strong> {{entity.name}}</li>{{#if entity.basicEntityReference}}<li><strong>Applied to {{camelCaseToTitle entity.basicEntityReference.type}}:</strong> <a href=\"{{buildEntityUrl entity.basicEntityReference.type entity.basicEntityReference}}\">{{entity.basicEntityReference.fullyQualifiedName}}</a></li>{{/if}}{{#if (gt (length entity.owners) 0)}}<li><strong>Owners:</strong> {{#each entity.owners}}{{#if displayName}}{{displayName}}{{else}}{{name}}{{/if}}{{#unless @last}}, {{/unless}}{{/each}}</li>{{/if}}{{#if (gt (length entity.reviewers) 0)}}<li><strong>Reviewers:</strong> {{#each entity.reviewers}}{{#if displayName}}{{displayName}}{{else}}{{name}}{{/if}}{{#unless @last}}, {{/unless}}{{/each}}</li>{{/if}}{{#if entity.tags}}<li><strong>Tags:</strong> {{#each (pluck entity.tags 'tagFQN') as |tagFQN|}}{{tagFQN}}{{#unless @last}}, {{/unless}}{{/each}}</li>{{/if}}{{#if entity.domains}}<li><strong>Domains:</strong> {{#each entity.domains}}{{#if displayName}}{{displayName}}{{else}}{{name}}{{/if}}{{#unless @last}}, {{/unless}}{{/each}}</li>{{/if}}</ul>{{#if entity.summary}}{{#if (or (gt entity.summary.failed 0) (gt entity.summary.aborted 0))}}<strong>\ud83d\udd2c Failure Investigation:</strong><br>{{#if entity.testCaseResultSummary}}<ul>{{#with (filter entity.testCaseResultSummary status='Failed') as |failedTests|}}{{#if failedTests}}{{#if (gt (length failedTests) 0)}}<li><strong>{{entity.summary.failed}}/{{entity.summary.total}} Failed tests</strong> <em>({{math (math (math entity.summary.failed '/' entity.summary.total) '*' 100) 'round' 2}}%)</em><ul>{{#each (limit failedTests 5)}}<li><a href=\"{{buildEntityUrl 'testCase' testCaseName}}\">{{#each (split testCaseName '.') as |part|}}{{#if @last}}{{part}}{{/if}}{{/each}}</a></li>{{/each}}{{#if (gt (length failedTests) 5)}}<li>... and {{math (length failedTests) '-' 5}} more failed test(s)</li>{{/if}}</ul></li>{{/if}}{{/if}}{{/with}}{{#with (filter entity.testCaseResultSummary status='Aborted') as |abortedTests|}}{{#if abortedTests}}{{#if (gt (length abortedTests) 0)}}<li><strong>{{entity.summary.aborted}}/{{entity.summary.total}} Aborted tests</strong> <em>({{math (math (math entity.summary.aborted '/' entity.summary.total) '*' 100) 'round' 2}}%)</em><ul>{{#each (limit abortedTests 5)}}<li><a href=\"{{buildEntityUrl 'testCase' testCaseName}}\">{{#each (split testCaseName '.') as |part|}}{{#if @last}}{{part}}{{/if}}{{/each}}</a></li>{{/each}}{{#if (gt (length abortedTests) 5)}}<li>... and {{math (length abortedTests) '-' 5}} more aborted test(s)</li>{{/if}}</ul></li>{{/if}}{{/if}}{{/with}}</ul>{{/if}}{{/if}}{{/if}}{{else}}{{#if changes.updates}}Changed fields:<br><ul>{{#each changes.updates}}<li>Updated {{#if (startsWith name 'columns.')}}{{#with (split name '.') as |parts|}}{{#if (endsWith name '.tags')}}<strong>tags</strong> for column {{lookup parts 1}}{{else}}<strong>{{lookup parts 2}}</strong> for column <strong>{{lookup parts 1}}</strong>{{/if}}{{/with}}{{else if (startsWith name 'extension.')}}{{#with (split name '.') as |parts|}}custom property '{{lookup parts 1}}'{{/with}}{{else}}<strong>{{name}}</strong>{{/if}}: {{#if (or (eq name 'tags') (endsWith name '.tags'))}}{{#if oldValue}}{{#each (pluck oldValue 'tagFQN') as |tagFQN|}}<del>{{tagFQN}}</del>{{#unless @last}}, {{/unless}}{{/each}}{{else}}<em>No tags</em>{{/if}} \u2192 {{#if newValue}}{{#each (pluck newValue 'tagFQN') as |tagFQN|}}<strong>{{tagFQN}}</strong>{{#unless @last}}, {{/unless}}{{/each}}{{else}}<em>No tags</em>{{/if}}{{else if (eq name 'owner')}}{{#if oldValue}}<del>{{#if oldValue.displayName}}{{oldValue.displayName}}{{else if oldValue.name}}{{oldValue.name}}{{else}}{{oldValue}}{{/if}}</del>{{else}}<em>No Owner</em>{{/if}} \u2192 {{#if newValue}}<strong>{{#if newValue.displayName}}{{newValue.displayName}}{{else if newValue.name}}{{newValue.name}}{{else}}{{newValue}}{{/if}}</strong>{{else}}<em>No Owner</em>{{/if}}{{else if (eq name 'owners')}}{{#if oldValue}}{{#each (pluck oldValue 'displayName') as |displayName|}}<del>{{displayName}}</del>{{#unless @last}}, {{/unless}}{{/each}}{{else}}<em>No Owner</em>{{/if}} \u2192 {{#if newValue}}{{#each (pluck newValue 'displayName') as |displayName|}}{{displayName}}{{#unless @last}}, {{/unless}}{{/each}}{{else}}<em>No Owner</em>{{/if}}{{else if (eq name 'certification')}}{{#with (pluck oldValue) as |oldCert|}}{{#if oldCert}}{{#if oldCert.tagLabel}}<del>{{oldCert.tagLabel.name}}{{#if oldCert.expiryDate}} (expires {{formatDate oldCert.expiryDate}}){{/if}}</del>{{else}}<del>{{oldCert}}</del>{{/if}}{{else}}<em>No Certification</em>{{/if}}{{/with}} \u2192 {{#with (pluck newValue) as |newCert|}}{{#if newCert}}{{#if newCert.tagLabel}}<strong>{{newCert.tagLabel.name}}{{#if newCert.expiryDate}} (expires {{formatDate newCert.expiryDate}}){{/if}}</strong>{{else}}<strong>{{newCert}}</strong>{{/if}}{{else}}<em>No Certification</em>{{/if}}{{/with}}{{else if (eq name 'domain')}}<del>{{resolveDomain oldValue}}</del> \u2192 <strong>{{#with (buildEntityUrl newValue.type newValue.fullyQualifiedName) as |url|}}<a href=\"{{url}}\">{{resolveDomain newValue}}</a>{{else}}{{resolveDomain newValue}}{{/with}}</strong>{{else if (eq name 'domains')}}{{#if oldValue}}{{#each (pluck oldValue) as |domain|}}<del>{{resolveDomain domain}}</del>{{#unless @last}}, {{/unless}}{{/each}}{{else}}<em>No Domain</em>{{/if}} \u2192 {{#if newValue}}{{#each (pluck newValue) as |domain|}}<strong>{{#with (buildEntityUrl domain.type domain.fullyQualifiedName) as |url|}}<a href=\"{{url}}\">{{resolveDomain domain}}</a>{{else}}{{resolveDomain domain}}{{/with}}</strong>{{#unless @last}}, {{/unless}}{{/each}}{{else}}<em>No Domain</em>{{/if}}{{else if (eq name 'description')}}{{textDiff oldValue newValue}}{{else if (startsWith name 'extension.')}}{{#if oldValue}}<del>{{oldValue}}</del>{{else}}<em>Not Set</em>{{/if}} \u2192 {{#if newValue}}<strong>{{newValue}}</strong>{{else}}<em>Not Set</em>{{/if}}{{else if (eq name 'assets')}}{{#if oldValue}}{{#each (pluck oldValue 'displayName') as |displayName|}}<del>{{displayName}}</del>{{#unless @last}}, {{/unless}}{{/each}}{{else}}<em>No assets</em>{{/if}} \u2192 {{#if newValue}}{{#each (pluck newValue 'displayName') as |displayName|}}<strong>{{displayName}}</strong>{{#unless @last}}, {{/unless}}{{/each}}{{else}}<em>No assets</em>{{/if}}{{else if (eq name 'kpiResult')}}{{#if newValue}}{{#if newValue.targetResult}}{{#with (lookup newValue.targetResult 0) as |result|}}Added Results for <strong>{{@root.entity.name}}</strong>. Target Name: <strong>{{result.name}}</strong>, Current Value: <strong>{{result.value}}</strong>, Target Met: <strong>{{result.targetMet}}</strong>{{/with}}{{else}}KpiResult <strong>{{@root.entity.name}}</strong> is updated{{/if}}{{else}}KpiResult <strong>{{@root.entity.name}}</strong> is updated{{/if}}{{else if (eq name 'pipelineStatus')}}{{#if (eq @root.event.entityType 'ingestionPipeline')}}{{#if newValue}}{{#if (eq newValue.pipelineState 'success')}}\u2705 <strong>Succeeded</strong>{{else if (eq newValue.pipelineState 'failed')}}\u274c <strong>Failed</strong>{{else if (eq newValue.pipelineState 'running')}}\ud83d\udd04 <strong>Running</strong>{{else if (eq newValue.pipelineState 'queued')}}\u23f3  <strong>Queued</strong>{{else if (eq newValue.pipelineState 'partialSuccess')}}\u26a0\ufe0f <strong>Partially Succeeded</strong>{{else}}<strong>{{newValue.pipelineState}}</strong>{{/if}} at {{formatDate newValue.timestamp}}{{else}}Ingestion Pipeline is updated{{/if}}{{else if (eq @root.event.entityType 'pipeline')}}{{#if newValue}}{{#if (eq newValue.executionStatus 'Successful')}}\u2705  <strong>Succeeded</strong>{{else if (eq newValue.executionStatus 'Failed')}}\u274c  <strong>Failed</strong>{{else if (eq newValue.executionStatus 'Pending')}}\u23f3  <strong>Pending</strong>{{else if (eq newValue.executionStatus 'Skipped')}}\u23ed\ufe0f  <strong>Skipped</strong>{{else}}<strong>{{newValue.executionStatus}}</strong>{{/if}} at {{formatDate newValue.timestamp}}{{else}}Pipeline is updated{{/if}}{{else}}{{#if oldValue}}{{oldValue}}{{else}}<em>empty</em>{{/if}} \u2192 {{#if newValue}}{{newValue}}{{else}}<em>empty</em>{{/if}}{{/if}}{{else if (eq name 'queryUsedIn')}}{{#if @root.entity.query}}for '{{@root.entity.query}}', <br>{{/if}}Query Used in: {{#each (pluck oldValue) as |entity|}}{{#with (buildEntityUrl entity.type entity.fullyQualifiedName) as |url|}}<a href=\"{{url}}\">{{entity.fullyQualifiedName}}</a>{{else}}{{entity.fullyQualifiedName}}{{/with}}{{#unless @last}}, {{/unless}}{{else}}<em>Not used</em>{{/each}} \u2192 {{#if @root.entity.query}}for '{{@root.entity.query}}', <br>{{/if}}Query Used in: {{#each (pluck newValue) as |entity|}}{{#with (buildEntityUrl entity.type entity.fullyQualifiedName) as |url|}}<a href=\"{{url}}\">{{entity.fullyQualifiedName}}</a>{{else}}{{entity.fullyQualifiedName}}{{/with}}{{#unless @last}}, {{/unless}}{{else}}<em>Not used</em>{{/each}}{{else if (startsWith name 'columns.')}}{{#if (endsWith name '.description')}}{{textDiff oldValue newValue}}{{else}}{{#if oldValue}}<del>{{oldValue}}</del>{{else}}<em>empty</em>{{/if}} \u2192 {{#if newValue}}<strong>{{newValue}}</strong>{{else}}<em>empty</em>{{/if}}{{/if}}{{else if (startsWith name 'customProperties.')}}{{#if oldValue}}<del>{{oldValue}}</del>{{else}}<em>Not Set</em>{{/if}} \u2192 {{#if newValue}}<strong>{{newValue}}</strong>{{else}}<em>Not Set</em>{{/if}}{{else}}{{#if (pluck oldValue 'displayName')}}{{#each (pluck oldValue 'displayName') as |displayName|}}<del>{{displayName}}</del>{{#unless @last}}, {{/unless}}{{/each}}{{else if (pluck oldValue 'name')}}{{#each (pluck oldValue 'name') as |name|}}<del>{{name}}</del>{{#unless @last}}, {{/unless}}{{/each}}{{else if (pluck oldValue 'fullyQualifiedName')}}{{#each (pluck oldValue 'fullyQualifiedName') as |fqn|}}<del>{{fqn}}</del>{{#unless @last}}, {{/unless}}{{/each}}{{else}}{{#if oldValue}}<del>{{oldValue}}</del>{{else}}<em>empty</em>{{/if}}{{/if}} \u2192 {{#if (pluck newValue 'displayName')}}{{#each (pluck newValue 'displayName') as |displayName|}}<strong>{{displayName}}</strong>{{#unless @last}}, {{/unless}}{{/each}}{{else if (pluck newValue 'name')}}{{#each (pluck newValue 'name') as |name|}}<strong>{{name}}</strong>{{#unless @last}}, {{/unless}}{{/each}}{{else if (pluck newValue 'fullyQualifiedName')}}{{#each (pluck newValue 'fullyQualifiedName') as |fqn|}}<strong>{{fqn}}</strong>{{#unless @last}}, {{/unless}}{{/each}}{{else}}{{#if newValue}}<strong>{{newValue}}</strong>{{else}}<em>empty</em>{{/if}}{{/if}}{{/if}}</li>{{/each}}</ul>{{/if}}{{#if changes.adds}}Added fields:<br><ul>{{#each changes.adds}}<li>Added {{#if (eq name 'followers')}}<strong>follow</strong> to <strong>{{camelCaseToTitle @root.event.entityType}}</strong> {{@root.entity.fullyQualifiedName}}{{else if (startsWith name 'columns.')}}{{#with (split name '.') as |parts|}}{{#if (endsWith name '.tags')}}<strong>tags</strong> to column <strong>{{lookup parts 1}}</strong>: {{#each (pluck newValue 'tagFQN') as |tagFQN|}}{{tagFQN}}{{#unless @last}}, {{/unless}}{{/each}}{{else}}<strong>{{lookup parts 2}}</strong> to column <strong>{{lookup parts 1}}</strong>: {{{newValue}}}{{/if}}{{/with}}{{else if (eq name 'tags')}}<strong>tags</strong>: {{#each (pluck newValue 'tagFQN') as |tagFQN|}}{{tagFQN}}{{#unless @last}}, {{/unless}}{{/each}}{{else if (startsWith name 'extension.')}}{{#with (split name '.') as |parts|}}Added custom property <strong>'{{lookup parts 1}}'</strong>: {{newValue}}{{/with}}{{else if (eq name 'owner')}}<strong>owner</strong>: {{#if newValue.displayName}}{{newValue.displayName}}{{else if newValue.name}}{{newValue.name}}{{else}}{{newValue}}{{/if}}{{else if (eq name 'owners')}}<strong>owners</strong>: {{#each (pluck newValue 'displayName') as |displayName|}}{{displayName}}{{#unless @last}}, {{/unless}}{{/each}}{{else if (eq name 'certification')}}<strong>certification</strong>: {{#with (pluck newValue) as |newCert|}}{{#if newCert.tagLabel}}{{newCert.tagLabel.name}}{{#if newCert.expiryDate}} (expires {{formatDate newCert.expiryDate}}){{/if}}{{else}}{{newCert}}{{/if}}{{/with}}{{else if (eq name 'domain')}}<strong>domain</strong>: {{#with (buildEntityUrl newValue.type newValue.fullyQualifiedName) as |url|}}<a href=\"{{url}}\">{{resolveDomain newValue}}</a>{{else}}{{resolveDomain newValue}}{{/with}}{{else if (eq name 'domains')}}<strong>domains</strong>: {{#each (pluck newValue) as |domain|}}{{#with (buildEntityUrl domain.type domain.fullyQualifiedName) as |url|}}<a href=\"{{url}}\">{{resolveDomain domain}}</a>{{else}}{{resolveDomain domain}}{{/with}}{{#unless @last}}, {{/unless}}{{/each}}{{else if (eq name 'description')}}<strong>description</strong>: {{{newValue}}}{{else if (eq name 'queryUsedIn')}}<strong>queryUsedIn</strong>: {{#if @root.entity.query}}for '{{@root.entity.query}}', <br>{{/if}}Query Used in: {{#each (pluck newValue) as |entity|}}{{#with (buildEntityUrl entity.type entity.fullyQualifiedName) as |url|}}<a href=\"{{url}}\">{{entity.fullyQualifiedName}}</a>{{else}}{{entity.fullyQualifiedName}}{{/with}}{{#unless @last}}, {{/unless}}{{/each}}{{else if (eq name 'assets')}}<strong>assets</strong>: {{#each (pluck newValue 'displayName') as |displayName|}}{{displayName}}{{#unless @last}}, {{/unless}}{{/each}}{{else}}<strong>{{name}}</strong>: {{#if (pluck newValue 'displayName')}}{{#each (pluck newValue 'displayName') as |displayName|}}{{displayName}}{{#unless @last}}, {{/unless}}{{/each}}{{else if (pluck newValue 'name')}}{{#each (pluck newValue 'name') as |name|}}{{name}}{{#unless @last}}, {{/unless}}{{/each}}{{else if (pluck newValue 'fullyQualifiedName')}}{{#each (pluck newValue 'fullyQualifiedName') as |fqn|}}{{fqn}}{{#unless @last}}, {{/unless}}{{/each}}{{else}}{{newValue}}{{/if}}{{/if}}</li>{{/each}}</ul>{{/if}}{{#if changes.deletes}}Deleted fields:<br><ul>{{#each changes.deletes}}<li>Deleted {{#if (eq name 'followers')}}<strong>follow</strong> to <strong>{{camelCaseToTitle @root.event.entityType}}</strong> {{@root.entity.fullyQualifiedName}}{{else if (startsWith name 'columns.')}}{{#with (split name '.') as |parts|}}{{#if (endsWith name '.tags')}}Deleted <strong>tags</strong> from column <strong>{{lookup parts 1}}</strong>: <del>{{#each (pluck oldValue 'tagFQN') as |tagFQN|}}{{tagFQN}}{{#unless @last}}, {{/unless}}{{/each}}</del>{{else}}Deleted <strong>{{lookup parts 2}}</strong> from column <strong>{{lookup parts 1}}</strong>: <del>{{oldValue}}</del>{{/if}}{{/with}}{{else if (eq name 'tags')}}<strong>tags</strong>: <del>{{#each (pluck oldValue 'tagFQN') as |tagFQN|}}{{tagFQN}}{{#unless @last}}, {{/unless}}{{/each}}</del>{{else if (startsWith name 'extension.')}}{{#with (split name '.') as |parts|}}Deleted custom property <strong>'{{lookup parts 1}}'</strong>: <del>{{oldValue}}</del>{{/with}}{{else if (eq name 'owner')}}<strong>owner</strong>: <del>{{#if oldValue.displayName}}{{oldValue.displayName}}{{else if oldValue.name}}{{oldValue.name}}{{else}}{{oldValue}}{{/if}}</del>{{else if (eq name 'owners')}}<strong>owners</strong>: <del>{{#each (pluck oldValue 'displayName') as |displayName|}}{{displayName}}{{#unless @last}}, {{/unless}}{{/each}}</del>{{else if (eq name 'certification')}}<strong>certification</strong>: {{#with (pluck oldValue) as |oldCert|}}{{#if oldCert.tagLabel}}<del>{{oldCert.tagLabel.name}}{{#if oldCert.expiryDate}} (expired {{formatDate oldCert.expiryDate}}){{/if}}</del>{{else}}<del>{{oldCert}}</del>{{/if}}{{/with}}{{else if (eq name 'domain')}}<strong>domain</strong>: <del>{{resolveDomain oldValue}}</del>{{else if (eq name 'domains')}}<strong>domains</strong>: <del>{{#each (pluck oldValue) as |domain|}}{{resolveDomain domain}}{{#unless @last}}, {{/unless}}{{/each}}</del>{{else if (eq name 'description')}}<strong>description</strong>: <del>{{oldValue}}</del>{{else if (eq name 'queryUsedIn')}}<strong>queryUsedIn</strong>: {{#if @root.entity.query}}for '{{@root.entity.query}}', <br>{{/if}}Query Used in was removed{{else if (eq name 'assets')}}<strong>assets</strong>: <del>{{#each (pluck newValue 'displayName') as |displayName|}}{{displayName}}{{#unless @last}}, {{/unless}}{{/each}}</del>{{else}}<strong>{{name}}</strong>: {{#if (pluck oldValue 'displayName')}}{{#each (pluck oldValue 'displayName') as |displayName|}}<del>{{displayName}}</del>{{#unless @last}}, {{/unless}}{{/each}}{{else if (pluck oldValue 'name')}}{{#each (pluck oldValue 'name') as |name|}}<del>{{name}}</del>{{#unless @last}}, {{/unless}}{{/each}}{{else if (pluck oldValue 'fullyQualifiedName')}}{{#each (pluck oldValue 'fullyQualifiedName') as |fqn|}}<del>{{fqn}}</del>{{#unless @last}}, {{/unless}}{{/each}}{{else}}<del>{{oldValue}}</del>{{/if}}{{/if}}</li>{{/each}}</ul>{{/if}}{{/if}}{{/with}}"
}